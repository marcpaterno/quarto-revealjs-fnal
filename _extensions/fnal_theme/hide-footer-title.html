<script>
  console.log("hide-footer-title.html script loaded!");

  const hideFooterAndSlideNumber = (isTitleSlide) => {
    const footer = document.querySelector('.reveal .footer');
    const slideNumber = document.querySelector('.reveal .slide-number');
    const titleSidebarImage = document.querySelector('.title-sidebar-image'); // Select the new div
    const revealElement = document.querySelector('.reveal'); // For debugging class list

    console.log("titleSidebarImage element: ", titleSidebarImage); // Debugging

    if (isTitleSlide) {
      console.log("Title slide active - hiding footer and slide number, showing title sidebar image.");
      if (footer) {
        footer.style.setProperty('display', 'none', 'important');
      }
      if (slideNumber) {
        slideNumber.style.setProperty('display', 'none', 'important');
      }
      if (titleSidebarImage) {
        titleSidebarImage.style.setProperty('display', 'block', 'important');
      }
      if (revealElement) {
        revealElement.classList.add('has-title-sidebar'); // Keep for debugging if needed
        console.log(".reveal element classes after adding: ", revealElement.className);
      }
    } else {
      console.log("Non-title slide active - showing footer and slide number, hiding title sidebar image.");
      if (footer) {
        footer.style.setProperty('display', 'flex', 'important');
      }
      if (slideNumber) {
        slideNumber.style.setProperty('display', 'block', 'important');
      }
      if (titleSidebarImage) {
        titleSidebarImage.style.setProperty('display', 'none', 'important');
      }
      if (revealElement) {
        revealElement.classList.remove('has-title-sidebar'); // Keep for debugging if needed
        console.log(".reveal element classes after removing: ", revealElement.className);
      }
    }
  };

  Reveal.on( 'slidechanged', event => {
    console.log("Slide changed event fired!");
    hideFooterAndSlideNumber(event.currentSlide.id === 'title-slide');
  });

  // Initial check in case the presentation starts on the title slide
  Reveal.on( 'ready', event => {
    console.log("Reveal ready event fired!");
    hideFooterAndSlideNumber(event.currentSlide.id === 'title-slide');
  });
</script>